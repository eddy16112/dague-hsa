if (PINS_ENABLE)
   if (NOT DAGUE_PROF_TRACE)
      MESSAGE(STATUS "Module ${MODULE} not selectable: DAGUE_PROF_TRACE disabled.")
   else (NOT DAGUE_PROF_TRACE)
           if (PARSEC_PROF_TAU AND NOT TAU_FOUND)
                  find_package(TAU REQUIRED)
                  set(HAVE_TAU ${TAU_FOUND})
		  set(HAVE_TAU ${TAU_FOUND} PARENT_SCOPE)
		  set(TAU_FOUND ${TAU_FOUND} PARENT_SCOPE)
		  if (TAU_FOUND)
			 list(APPEND EXTRA_LIBS ${TAU_LIBRARIES})
			 include_directories( ${TAU_INCLUDE_DIR} )
		  endif (TAU_FOUND)
	   endif (PARSEC_PROF_TAU AND NOT TAU_FOUND)

	   if (NOT PAPI_FOUND)
		  find_package(PAPI)
		  set(HAVE_PAPI ${PAPI_FOUND})
		  set(HAVE_PAPI ${PAPI_FOUND} PARENT_SCOPE)
		  set(PAPI_FOUND ${PAPI_FOUND} PARENT_SCOPE)
		  if (PAPI_FOUND)
			 list(APPEND EXTRA_LIBS ${PAPI_LIBRARY})
			 include_directories( ${PAPI_INCLUDE_DIR} )
		  endif (PAPI_FOUND)
	   endif (NOT PAPI_FOUND)
 
	   if (HAVE_PAPI AND (HAVE_TAU OR NOT PARSEC_PROF_TAU))
		  SET(MCA_${COMPONENT}_${MODULE} ON)
		  FILE(GLOB MCA_${COMPONENT}_${MODULE}_SOURCES ${MCA_BASE_DIR}/${COMPONENT}/${MODULE}/[^\\.]*.c)
		  SET(MCA_${COMPONENT}_${MODULE}_CONSTRUCTOR "${COMPONENT}_${MODULE}_static_component")
	   else (HAVE_PAPI AND (HAVE_TAU OR NOT PARSEC_PROF_TAU))
		  MESSAGE(SEND_ERROR "Module ${MODULE} not selectable: requires PAPI and/or TAU")
		  SET(MCA_${COMPONENT}_${MODULE} OFF)
	   endif (HAVE_PAPI AND (HAVE_TAU OR NOT PARSEC_PROF_TAU))
   endif (NOT DAGUE_PROF_TRACE)
else (PINS_ENABLE)
   MESSAGE(STATUS "Module ${MODULE} not enabled: PINS disabled.")
   SET(MCA_${COMPONENT}_${MODULE} OFF)
endif (PINS_ENABLE)
