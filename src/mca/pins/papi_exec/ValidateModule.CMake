if (PINS_ENABLE)
  if (NOT DAGUE_PROF_TRACE)
    MESSAGE(STATUS "Module ${MODULE} not selectable: DAGUE_PROF_TRACE disabled.")
  else (NOT DAGUE_PROF_TRACE)
    if (NOT PAPI_FOUND)
      find_package(PAPI)
      set(HAVE_PAPI ${PAPI_FOUND})
      set(HAVE_PAPI ${PAPI_FOUND} PARENT_SCOPE)
      set(PAPI_FOUND ${PAPI_FOUND} PARENT_SCOPE)
      if (PAPI_FOUND)
	list(APPEND EXTRA_LIBS ${PAPI_LIBRARY})
	include_directories( ${PAPI_INCLUDE_DIR} )
      endif (PAPI_FOUND)
    endif (NOT PAPI_FOUND)

    if (HAVE_PAPI)
      SET(MCA_${COMPONENT}_${MODULE} ON)
      FILE(GLOB MCA_${COMPONENT}_${MODULE}_SOURCES ${MCA_BASE_DIR}/${COMPONENT}/${MODULE}/[^\\.]*.c)
      SET(MCA_${COMPONENT}_${MODULE}_CONSTRUCTOR "${COMPONENT}_${MODULE}_static_component")
    else (HAVE_PAPI)
      MESSAGE(INFO "Module ${MODULE} not selectable: does not have PAPI")
      SET(MCA_${COMPONENT}_${MODULE} OFF)
    endif( HAVE_PAPI )
  endif (NOT DAGUE_PROF_TRACE)
else (PINS_ENABLE and DAGUE_PROF_TRACE)
  MESSAGE(STATUS "Module ${MODULE} not enabled: PINS disabled.")
  SET(MCA_${COMPONENT}_${MODULE} OFF)
endif (PINS_ENABLE)
