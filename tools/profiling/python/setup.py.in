#!/usr/bin/env python
# build script for dbpreader_py
# run python setup.py build_ext --inplace to build


from distutils.core import setup
from distutils.extension import Extension
from Cython.Distutils import build_ext

ext_modules = [Extension('dbpreader_py', ['@CMAKE_CURRENT_SOURCE_DIR@/dbpreader_py.pyx',
                                          '@CMAKE_CURRENT_SOURCE_DIR@/../dbpreader.c'],
                                          include_dirs=['@PROJECT_SOURCE_DIR@/include',
                                                        '@PROJECT_BINARY_DIR@/include',
                                                        '@CMAKE_CURRENT_SOURCE_DIR@/../'],
                                          depends=['dbpreader_py.pxd',
                                                   '@CMAKE_CURRENT_BINARY_DIR@/../dbpreader.h',
                                                   '@PROJECT_SOURCE_DIR@/include/dbp.h',
                                                   '@PROJECT_SOURCE_DIR@/include/os-spec-timing.h'],
                                          extra_compile_args=['-O0'])]

setup(
  name = 'dbpreader python interface',
  version='@PACKAGE_VERSION@',
  description='PaRSEC profiling parser',
  url='http://icl.cs.utk.edu/parsec/',
  package_dir={ '': '@CMAKE_CURRENT_SOURCE_DIR@' },
  cmdclass = {'build_ext': build_ext},
  ext_modules = ext_modules
)
