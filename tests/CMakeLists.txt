#set(CMAKE_C_COMPILER "vtcc")
#set(CMAKE_Fortran_COMPILER "vtf77")
Add_Subdirectory(rtt)
if (DAGUE_DEBUG_BUILD_UNIT_TESTS )
  Add_Subdirectory(unit)
endif(DAGUE_DEBUG_BUILD_UNIT_TESTS )

add_executable(operator operator.c)
set_target_properties(operator PROPERTIES LINKER_LANGUAGE C)
if( MPI_FOUND )
  set_target_properties(operator PROPERTIES LINK_FLAGS "${MPI_LINK_FLAGS} ${LOCAL_C_LINK_FLAGS} ${HWLOC_LIB}")
  target_link_libraries(operator dague_distribution_matrix-mpi dague-mpi ${MPI_LIBRARIES})
else(MPI_FOUND)
  set_target_properties(operator PROPERTIES LINK_FLAGS "${LOCAL_C_LINK_FLAGS} ${HWLOC_LIB}")
  target_link_libraries(operator dague_distribution_matrix dague)
endif( MPI_FOUND )

add_executable(reduce reduce.c)
set_target_properties(reduce PROPERTIES LINKER_LANGUAGE C)
if( MPI_FOUND )
  set_target_properties(reduce PROPERTIES LINK_FLAGS "${MPI_LINK_FLAGS} ${LOCAL_C_LINK_FLAGS} ${HWLOC_LIB}")
  target_link_libraries(reduce dague_distribution_matrix-mpi dague-mpi ${MPI_LIBRARIES})
else(MPI_FOUND)
  set_target_properties(reduce PROPERTIES LINK_FLAGS "${LOCAL_C_LINK_FLAGS} ${HWLOC_LIB}")
  target_link_libraries(reduce dague_distribution_matrix dague)
endif( MPI_FOUND )
